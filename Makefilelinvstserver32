#!/usr/bin/make -f
# Makefile for LinVst #

CXX     = g++
WINECXX = wineg++ 

CXX_FLAGS =

BUILD_FLAGS_WIN = -m32 -O2 -I/opt/local/include/wine/windows 
LINK_FLAGS   = $(LDFLAGS)

LINK_WINE   =  -lpthread  $(LINK_FLAGS)

TARGETS     = lin-vst-server.exe

# --------------------------------------------------------------

all: $(TARGETS)
	
lin-vst-server.exe: lin-vst-server.wine.o remotepluginserver.wine.o rdwrops.wine.o paths.wine.o
	$(WINECXX) -m32 -L/opt/local/lib64 -L/opt/local/lib64/wine $^ $(LINK_WINE) -o $@

# --------------------------------------------------------------

lin-vst-server.wine.o: lin-vst-server.cpp
	$(WINECXX) $(BUILD_FLAGS_WIN) -c $^ -o $@

remotepluginserver.wine.o: remotepluginserver.cpp
	$(WINECXX) $(BUILD_FLAGS_WIN) -c $^ -o $@

rdwrops.wine.o: rdwrops.cpp
	$(WINECXX) $(BUILD_FLAGS_WIN) -c $^ -o $@

paths.wine.o: paths.cpp
	$(WINECXX) $(BUILD_FLAGS_WIN) -c $^ -o $@


clean:
	rm -fR *.o *.exe *.so vst $(TARGETS)

